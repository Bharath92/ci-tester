language: none

build:
  pre_ci_boot:
    image_name: drydock/u14ruball
    image_tag: master
    pull: true
  ci:
    - source /usr/local/rvm/scripts/rvm
    - rvm install 2.6.0 --verify-downloads 1
    - . /root/.bashrc && . /usr/local/rvm/scripts/rvm && rvm use 2.6.0
    - rvm autolibs disable
    - rvm ls
    - gem_version=$(gem --version)
    - gem_version_major=$(echo $gem_version | awk '{split($0, a, "."); print a[1]}')
    - |
      if [ $gem_version_major -gt 2 ]; then
        gem_install_cmd="gem install bundler --no-document --version 1.17.3"  
      else
        gem_install_cmd="gem install bundler --no-ri --no-rdoc --version 1.17.3"
      fi
    - eval "$gem_install_cmd"
